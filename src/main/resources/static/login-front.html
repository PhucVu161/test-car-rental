<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Đăng nhập</title>
</head>
<body>
<h2>Đăng nhập</h2>
<form id="loginForm">
    <label for="username">Tên đăng nhập:</label>
    <input type="text" id="username" required>
    <br>
    <label for="password">Mật khẩu:</label>
    <input type="password" id="password" required>
    <br>
    <button type="submit">Đăng nhập</button>
</form>
<p id="message"></p>

<script>
    document.getElementById("loginForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Ngăn reload trang

        let username = document.getElementById("username").value;
        let password = document.getElementById("password").value;

        fetch("/accounts")
            .then(response => response.json())
            .then(accounts => {
                let user = accounts.find(acc => acc.username === username && acc.password === password);

                if (user) {
                    document.getElementById("message").textContent = "Đăng nhập thành công! Vai trò: " + user.role;
                    // Lưu thông tin user vào localStorage (tùy theo yêu cầu)
                    localStorage.setItem("user", JSON.stringify(user));
                } else {
                    document.getElementById("message").textContent = "Sai tài khoản hoặc mật khẩu!";
                }
            })
            .catch(error => console.error("Lỗi:", error));
    });
</script>
</body>
</html>